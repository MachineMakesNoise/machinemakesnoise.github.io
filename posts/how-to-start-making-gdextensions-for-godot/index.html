<!doctype html><html lang=en><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1,viewport-fit=cover"><title>Machine Makes Noise - How to start making GDExtensions for Godot</title><meta name=description content="A brief tutorial covering project structure, code, build process and debugging native Godot 4 extensions."><meta name=keywords content="godot4 c++"><meta property="og:title" content="How to start making GDExtensions for Godot"><meta property="og:description" content="A brief tutorial covering project structure, code, build process and debugging native Godot 4 extensions."><meta property="og:type" content="article"><meta property="og:url" content="https://www.machinemakesnoise.com/posts/how-to-start-making-gdextensions-for-godot/"><meta property="article:section" content="posts"><meta property="article:published_time" content="2022-11-16T18:00:00+00:00"><meta property="article:modified_time" content="2023-01-02T17:20:28+02:00"><link rel=canonical href=https://www.machinemakesnoise.com/posts/how-to-start-making-gdextensions-for-godot/><link rel=stylesheet href=/css/style.css type=text/css media=all></head><body><header><pre aria-disabled class="header-ascii ascii"><i class="a b">   </i><i class="c b">&#x2591;</i><i class="a b">                </i><i class="c b">&#x2591;</i><i class="a b">         </i><i class="c b">&#x2591;</i><i class="a b">          </i>
<i class="a b">      </i><i class="c b">&#x2591;</i><i class="a b">           </i><i class="c b">&#x2591;</i><i class="a b">                      </i>
<i class="a b">   </i><i class="c b">&#x2592;</i><i class="a b">   </i><i class="c b">&#x2592;</i><i class="a b">         </i><i class="c b">&#x2592;</i><i class="a b">   </i><i class="c b">&#x2592;</i><i class="a b">       </i><i class="c b">&#x2592;</i><i class="a b">  </i><i class="c b">&#x2591;</i><i class="a b">        </i>
<i class="a b">   </i><i class="d b">&#x2588;</i><i class="c b">&#x2593;</i><i class="a b"> </i><i class="c b">&#x2593;</i><i class="d b">&#x2588;</i><i class="a b">         </i><i class="d b">&#x2588;</i><i class="c b">&#x2593;</i><i class="a b"> </i><i class="c b">&#x2593;</i><i class="d b">&#x2588;</i><i class="a b">       </i><i class="d b">&#x2588;</i><i class="c b">&#x2593;</i><i class="a b"> </i><i class="d b">&#x2588;</i><i class="a b">        </i>
<i class="a b">   </i><i class="d b">&#x2588;&#x2588;</i><i class="c b">&#x2588;</i><i class="d b">&#x2588;&#x2588;</i><i class="e b">&#x2591;</i><i class="a b">        </i><i class="d b">&#x2588;&#x2588;</i><i class="c b">&#x2588;</i><i class="d b">&#x2588;&#x2588;</i><i class="e b">&#x2591;</i><i class="a b">      </i><i class="d b">&#x2588;&#x2588;</i><i class="c b">&#x2588;</i><i class="d b">&#x2588;</i><i class="e b">&#x2591;</i><i class="a b">       </i>
<i class="a b">   </i><i class="d b">&#x2588;</i><i class="e b">&#x2591;</i><i class="d b">&#x2588;</i><i class="e b">&#x2591;</i><i class="d b">&#x2588;</i><i class="e b">&#x2591;</i><i class="a b">        </i><i class="d b">&#x2588;</i><i class="e b">&#x2591;</i><i class="d b">&#x2588;</i><i class="e b">&#x2591;</i><i class="d b">&#x2588;</i><i class="e b">&#x2591;</i><i class="a b">      </i><i class="d b">&#x2588;</i><i class="e b">&#x2591;</i><i class="d b">&#x2588;&#x2588;</i><i class="e b">&#x2591;</i><i class="a b">       </i>
<i class="a b">   </i><i class="d b">&#x2588;</i><i class="e b">&#x2591;</i><i class="a b"> </i><i class="e b">&#x2591;</i><i class="d b">&#x2588;</i><i class="e b">&#x2591;</i><i class="d b">achine</i><i class="a b">  </i><i class="d b">&#x2588;</i><i class="e b">&#x2591;</i><i class="a b"> </i><i class="e b">&#x2591;</i><i class="d b">&#x2588;</i><i class="e b">&#x2591;</i><i class="d b">akes</i><i class="a b">  </i><i class="d b">&#x2588;</i><i class="e b">&#x2591;</i><i class="a b"> </i><i class="d b">&#x2588;</i><i class="e b">&#x2591;</i><i class="d b">oise</i><i class="a b">   </i>
<i class="a b">    </i><i class="e b">&#x2591;</i><i class="a b">   </i><i class="e b">&#x2591;</i><i class="a b"> </i><i class="e b">&#x2591;&#x2591;&#x2591;&#x2591;&#x2591;&#x2591;</i><i class="a b">  </i><i class="e b">&#x2591;</i><i class="a b">   </i><i class="e b">&#x2591;</i><i class="a b"> </i><i class="e b">&#x2591;&#x2591;&#x2591;&#x2591;</i><i class="a b">  </i><i class="e b">&#x2591;</i><i class="a b">  </i><i class="e b">&#x2591;</i><i class="a b"> </i><i class="e b">&#x2591;&#x2591;&#x2591;&#x2591;</i><i class="a b">  </i>
<i class="d b">&#xb7;&#x2500;&#x2550;&#x2550;&#x2550;&#x2550;&#x2550;&#x2550;&#x2550;&#x2550;&#x2550;&#x2550;&#x2550;&#x2550;&#x2550;&#x2550;&#x2550;&#x2550;&#x2550;&#x2550;&#x2550;&#x2550;&#x2550;&#x2550;&#x2550;&#x2550;&#x2550;&#x2550;&#x2550;&#x2550;&#x2550;&#x2550;&#x2550;&#x2550;&#x2550;&#x2550;&#x2550;&#x2550;&#x2550;&#x2500;&#xb7;</i></pre><nav><ul class="main-menu ascii no-print"><li aria-disabled class=before-separator>/</li><li class=item><a href=/>Posts</a></li><li aria-disabled class=before-separator>/</li><li class=item><a href=/about/>About</a></li><li aria-disabled class=after-separator>/</li></ul></nav></header><main><article><header><h1 class=single>How to start making GDExtensions for Godot</h1><section class="colored padding-bottom-font margin-top-font"><div class="summary margin-top-font"><div class="left order-1">Published&nbsp;2022-11-16</div><div class="right order-3">Modified&nbsp;2023-01-02</div><h2 class=order-2>Summary</h2></div><div class=taxonomy><div class=left><ul class="taxonomy flex-direction-row"><li class=margin-right-font><a href=https://www.machinemakesnoise.com/categories/development/>development</a></li><li><a href=https://www.machinemakesnoise.com/categories/tutorial/>tutorial</a></li></ul></div><div class=right><ul class="taxonomy flex-direction-row"><li class=margin-right-font><a href=https://www.machinemakesnoise.com/keywords/c++/>c++</a></li><li><a href=https://www.machinemakesnoise.com/keywords/godot4/>godot4</a></li></ul></div></div><p>A brief tutorial covering project structure, code, build process and debugging native Godot 4 extensions.</p><div><h3>Table of contents</h3><nav id=TableOfContents><ul><li><a href=#introduction>Introduction</a></li><li><a href=#what-are-gdextensions>What are GDExtensions?</a></li><li><a href=#fresh-gdextension>Fresh GDExtension</a><ul><li><a href=#folder-external>Folder &ldquo;external&rdquo;</a></li><li><a href=#folder-game>Folder &ldquo;game&rdquo;</a></li><li><a href=#folder-gdextension_test>Folder &ldquo;gdextension_test&rdquo;</a></li><li><a href=#project-root-folder>Project root folder</a></li></ul></li><li><a href=#build>Build</a></li><li><a href=#testing>Testing</a></li><li><a href=#debug>Debug</a></li><li><a href=#further-studying>Further studying</a><ul><li><a href=#static-linking-in-gdextensions>Static linking in GDExtensions</a></li><li><a href=#unit-testing>Unit testing</a></li><li><a href=#gdextension-development-process>GDExtension development process</a></li></ul></li><li><a href=#git-repository>Git repository</a></li><li><a href=#epilogue>Epilogue</a></li></ul></nav></div></section></header><h2 id=introduction>Introduction</h2><p>This article is not meant for a complete beginner since it delves a bit deeper into the realm of C++ and its tooling. I‚Äôd love to make an article that covers more of that part too but currently time is a luxury I don‚Äôt have with busy life and all.</p><section class="colored padding-top-font padding-bottom-font margin-top-font"><h2>Author's Note</h2><p>I usually create and test lots of things and play around with different engines, libraries and so on. When I began testing GDExtensions I didn‚Äôt find any proper tutorials on the subject. I thought I‚Äôd create this article since there is always a possibility that my time spent on GDExtensions might not yield any actual releasable &ldquo;stuff&rdquo;. At least now with this article the knowledge gained from that time might help others ‚Äî hopefully You my dear reader.</p><p>Article was created using Windows as a development platform but can be adjusted for other platforms too. Enough pleas and I might create Linux and Mac versions but no promises especially since I don‚Äôt own a Mac üòÖ</p><p>One must have working C++ compiler tool chain up and running in order to actually build the project. I personally use Visual Studio 2022 Community and its C++ compiler/Environment.</p><p>Some versions used in the article :</p><ul><li>Visual Studio 2022 Community</li><li>CMake 3.24.2</li><li>Godot 4.0 beta 4</li></ul></section><p>At the end of the article You can find the repository to clone/copy/fork so You don‚Äôt have to start from scratch.</p><h2 id=what-are-gdextensions>What are GDExtensions?</h2><p>Introductory blog post Introducing <a href=https://godotengine.org/article/introducing-gd-extensions>GDNative‚Äôs successor, GDExtension</a> defines GDExtension as following :</p><section class=padding-top-font><blockquote>GDExtension is a new implementation of the GDNative layer that allows the creation of compiled plugins for the engine. At its core, GDExtension is a C API that enables registration of classes implemented within a dynamic library.
<span class=detail>(Bastiaan Olij)</span></blockquote></section><section class="colored padding-top-font padding-bottom-font margin-top-font"><h2>Author's Note</h2><p>I started to use Godot while the version 4.0 beta 1 was released so I cannot directly compare the GDNative and GDExtension. The main difference is that
while GDNative extensions are compiled directly into the engine, GDExtension live outside as dynamic modules ‚Äî like the quotation above states. This point alone brings huge development workflow benefits.</p></section><p>GDExtensions are intended for extending the engine using other means than those provided with the engine ‚Äî like GDScript or C# depending on your Godot flavor. These extensions can provide game specific entities (those that inherit from RefCounted, Objects, Nodes and so on) or larger features (such as new scripting languages). The API is pretty low level and because of that it enables broader extending than the scripting side. It is indeed a versatile tool in your arsenal but it is not as easy to use as GDScript. This is because while the API is indeed lower level it usually means that the language used to create GDExtensions is lower level too and does not provide higher level language features such as asynchronous programming. While any low lever language that is compatible with Godot C ABI can be used this article focuses mainly on C++ because of the <a href=https://github.com/godotengine/godot-cpp>godot-cpp</a> project we will get into further in the article.</p><p>You presumably can write a <em>whole</em> game in GDExtensions but I‚Äôm not entirely sure that is wise just because of the asynchronous possibilities GDScript provides and scripting languages are just faster to code with compared to compiled code which include added build times. Main advantage of lower level languages such as C++ is performance.</p><section class="colored padding-top-font padding-bottom-font margin-top-font"><h2>Author's Note</h2><p>Personally I don‚Äôt like GDScript that much (maybe someday I‚Äôll write why, hint: I‚Äôm somewhat of a language purist) and prefer to write the majority of the game in C/C++ (crazy I know!) but I still leave things to GDScript where it‚Äôs a better fit. Mix and match, use the <strong>right tool for the right job</strong>!</p></section><h2 id=fresh-gdextension>Fresh GDExtension</h2><p>Let‚Äôs create a folder structure that can easily handle multiple separate GDExtensions if needed and the actual Godot project that uses them.</p><p>The root of the project will look like this :</p><p><section><figure><a href=/posts/how-to-start-making-gdextensions-for-godot/project-structure_hu46f64bd083d44bc57a02e58be07d129c_3142_559x148_resize_q75_h2_box_2.webp><img src=/posts/how-to-start-making-gdextensions-for-godot/project-structure_hu46f64bd083d44bc57a02e58be07d129c_3142_559x148_resize_q75_h2_box_2.webp alt="Project structure"></a><figcaption class=detail>Project structure.</figcaption></figure></section></p><p>This is a good place to create the repository for the project if you plan to use one. Initialize it by running the following command in the root folder :<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-plaintext data-lang=plaintext><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1</span><span>git init .</span></span></code></pre></div><section class="colored padding-top-font padding-bottom-font margin-top-font"><h2>Author's Note</h2><p>This structure is not required for any of the things to actually work. To my knowledge this kind of structure is not some general convention either. I have found it to work for me but you have your own ways of working that does not need to adhere to the way presented here. So please, modify and adapt these to work for You, not the other way around. Besides, I‚Äôm making changes all the time trying to find the-best-workflow-ever‚Ñ¢Ô∏è without honestly achieving that goal‚Ä¶</p></section></p><p>Let‚Äôs go through each of the folders one by one and explain what is their function.</p><h3 id=folder-external>Folder &ldquo;external&rdquo;</h3><p>This folder will contain all that is &ldquo;external&rdquo; from the project view point. These external things (for the lack of a better word) should be things that are shared by project parts that are within the root, next to the &ldquo;external&rdquo; folder. This is because the other project parts that reside under the root can have their own external dependencies that are not shared and are unique to those parts only.</p><p>The most important thing here for the sake of this article is a library that we can use to code GDExtensions with C++ and that is called <a href=https://github.com/godotengine/godot-cpp>godot-cpp</a>.</p><section class="colored padding-top-font padding-bottom-font margin-top-font"><h2>Author's Note</h2><p>You can download a snapshot of the current state of that library repository but I highly recommend You create a Git repository for the project like above and add godot-cpp as a submodule to that project. This way Git will handle the submodule dependency (and other possible dependencies) as well as your main project containing custom GDExtensions and the actual Godot project.</p><p>To add git submodule, after initializing Git repository to the project root, go to the &ldquo;external&rdquo; folder and type the following:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-plaintext data-lang=plaintext><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1</span><span>git submodule add https://github.com/godotengine/godot-cpp.git godot-cpp</span></span></code></pre></div><p>Note that if You clone Your project to empty folder at some point in the future submodules might not &ldquo;pull&rdquo; automatically. To pull them just run the following command in the project root :</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-plaintext data-lang=plaintext><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1</span><span>git pull --recurse-submodules</span></span></code></pre></div></section><p>The godot-cpp library itself is what it says on the tin. One can generate whole engine binding specifications from the Godot engine as a JSON file and from that file one can generate language specific bindings. The godot-cpp library is language specific bindings for C++ and it is an official project under the Godot engine. There are community provided language bindings for other languages such as Rust and Go but we will go with the official bindings for now.</p><section class="colored padding-top-font padding-bottom-font margin-top-font"><h2>Author's Note</h2><p>I‚Äôd love to use Rust with Godot at some point though.</p></section><p>So now the external folder should look like this :</p><p><section><figure><a href=/posts/how-to-start-making-gdextensions-for-godot/external-folder_hu66d3f063731e5ed76cab340a2fc82a6f_1698_620x95_resize_q75_h2_box_2.webp><img src=/posts/how-to-start-making-gdextensions-for-godot/external-folder_hu66d3f063731e5ed76cab340a2fc82a6f_1698_620x95_resize_q75_h2_box_2.webp alt="Project structure"></a><figcaption class=detail>"external" folder.</figcaption></figure></section></p><p>And inside the &ldquo;godot-cpp&rdquo; folder it should look something like this :</p><p><section><figure><a href=/posts/how-to-start-making-gdextensions-for-godot/godot-cpp-folder_hud62c84733b987f107218ce00ced98589_20090_661x921_resize_q75_h2_box_2.webp><img src=/posts/how-to-start-making-gdextensions-for-godot/godot-cpp-folder_hud62c84733b987f107218ce00ced98589_20090_661x921_resize_q75_h2_box_2.webp alt="Project structure"></a><figcaption class=detail>"godot-cpp" folder.</figcaption></figure></section></p><p>And this is all that is needed for this exercise as our &ldquo;external&rdquo; dependencies.</p><h3 id=folder-game>Folder &ldquo;game&rdquo;</h3><p>Let‚Äôs create a Godot project inside the &ldquo;game&rdquo; folder. Renderer type does matter here, pick what ever suits your project best. I usually select &ldquo;Git&rdquo; in the &ldquo;Version Control Metadata&rdquo;.</p><section class="colored padding-top-font padding-bottom-font margin-top-font"><h2>Author's Note</h2><p>I usually just write something boring such as &ldquo;Client&rdquo; or &ldquo;Game&rdquo; as the Godot project name since at the root level I almost always use random project name that is not name of the final product. This is because when I‚Äôm prototyping the final name can change multiple times during the project.</p></section><p>The &ldquo;game&rdquo; folder contents now :</p><p><section><figure><a href=/posts/how-to-start-making-gdextensions-for-godot/game-folder_hua8aa4d0e5efe90868511057ae3e330d8_7772_658x304_resize_q75_h2_box_2.webp><img src=/posts/how-to-start-making-gdextensions-for-godot/game-folder_hua8aa4d0e5efe90868511057ae3e330d8_7772_658x304_resize_q75_h2_box_2.webp alt="Project structure"></a><figcaption class=detail>"game" folder.</figcaption></figure></section></p><section class="colored padding-top-font padding-bottom-font margin-top-font"><h2>Author's Note</h2><p>If you chose &ldquo;Git&rdquo; in &ldquo;Version Control Metadata&rdquo; it will create a default .gitignore and .gitattributes files inside the folder that we can merge (or just move) to the root of the project to ignore all the unnecessary bits from version control.</p><p>Oh, and you should add build directory to your .gitignore to prevent all intermediate build related stuff from leaking into the repository. My .gitignore is like this:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-plaintext data-lang=plaintext><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1</span><span>out
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">2</span><span>.vs
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">3</span><span>*.gdextension
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">4</span><span>*.dll
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">5</span><span># Godot 4+ specific ignores
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">6</span><span>.godot/</span></span></code></pre></div></section><p>Then create &ldquo;extensions&rdquo; folder under game resources, here we will put the created GDExtension.</p><p><section><figure><a href=/posts/how-to-start-making-gdextensions-for-godot/create-extensions-folder-inside-godot_hu73ec84f1926a004386e16df1d546576d_13896_715x985_resize_q75_h2_box_2.webp><img src=/posts/how-to-start-making-gdextensions-for-godot/create-extensions-folder-inside-godot_hu73ec84f1926a004386e16df1d546576d_13896_715x985_resize_q75_h2_box_2.webp alt="Project structure"></a><figcaption class=detail>Create "extensions" folder inside Godot.</figcaption></figure></section></p><p>Now the folder structure inside the game should look something like this :</p><p><section><figure><a href=/posts/how-to-start-making-gdextensions-for-godot/game-folder-after-extensions_hud9635080f90f28d7e6af3700c2730492_5934_643x268_resize_q75_h2_box_2.webp><img src=/posts/how-to-start-making-gdextensions-for-godot/game-folder-after-extensions_hud9635080f90f28d7e6af3700c2730492_5934_643x268_resize_q75_h2_box_2.webp alt="Project structure"></a><figcaption class=detail>Folder "game" after creating extensions.</figcaption></figure></section></p><p>You can shut down Godot for now.</p><h3 id=folder-gdextension_test>Folder &ldquo;gdextension_test&rdquo;</h3><p>This is the meat of our GDExtension. Here lies the code for the extension we plan to create and the means to build it. First lets start with the structure of our extension folder :</p><p><section><figure><a href=/posts/how-to-start-making-gdextensions-for-godot/gdextension_test-folder_hu384c54cc7adfe4608a1b999fa315935b_1386_655x133_resize_q75_h2_box_2.webp><img src=/posts/how-to-start-making-gdextensions-for-godot/gdextension_test-folder_hu384c54cc7adfe4608a1b999fa315935b_1386_655x133_resize_q75_h2_box_2.webp alt="Project structure"></a><figcaption class=detail>Folder "gdextension_test".</figcaption></figure></section></p><p>It will only contain one folder. We could put header files into separate &ldquo;include&rdquo; folder but this convention is usually used for shared and reusable libraries which are included in other external source files ‚Äî You could think godot-cpp as this kind of library and it indeed has an separate &ldquo;include&rdquo; folder other projects can include files from. Our GDExtension will have headers but it is not meant to be shared as such and nobody other than us will include the headers we create. The extension, a dynamic library, is linked to Godot by the C ABI it defines (lowest level interface Godot provides can be found in the official godot-headers project). If this is foreign concept I suggest reading up on private and public headers.</p><p>If You wish to include this project in other C++ projects though then of course by all means, create a separate &ldquo;include&rdquo; folder.</p><section class="colored padding-top-font padding-bottom-font margin-top-font"><h2>Author's Note</h2><p>I have tried to comment all the code related things in the code and not in the article. When and if you copy-paste the code to your project, and in the future don‚Äôt remember where to find the article you can still have the needed information in front of you. And it is a good to practice to comment the code‚Ä¶</p><p>I‚Äôm using Visual Studio 2022 Community as an IDE. Previously I tried to use the Visual Studio Code as my primary IDE but debugging with Visual Studio compiler was too much of a hassle so I switched. If you plan to use MinGW or Clang as a compiler you might have better luck. You can download Visual Studio 2022 Community here. Note that if you work in professional environment, please read the license whether you are qualified to use it or do you need an actual bought license.</p></section><p>Now, let‚Äôs create our custom TestNode2D, put these files in the &ldquo;src&rdquo; folder :</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-cpp data-lang=cpp><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 1</span><span><span style=color:#75715e>#include</span> <span style=color:#75715e>&#34;test_node2d.hpp&#34;</span><span style=color:#75715e>
</span></span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 2</span><span><span style=color:#75715e>#include</span> <span style=color:#75715e>&lt;godot_cpp/variant/utility_functions.hpp&gt;</span><span style=color:#75715e>
</span></span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 3</span><span><span style=color:#75715e></span>
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 4</span><span><span style=color:#66d9ef>namespace</span> gdextension_test
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 5</span><span>{
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 6</span><span>  <span style=color:#66d9ef>void</span> TestNode2D<span style=color:#f92672>::</span>say_hello(<span style=color:#66d9ef>const</span> String<span style=color:#f92672>&amp;</span> what)
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 7</span><span>  {
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 8</span><span>    <span style=color:#75715e>// Print to Godot Console.
</span></span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 9</span><span><span style=color:#75715e></span>    godot<span style=color:#f92672>::</span>UtilityFunctions<span style=color:#f92672>::</span>print(<span style=color:#e6db74>&#34;Hello &#34;</span>, what, <span style=color:#e6db74>&#34;!&#34;</span>);
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">10</span><span>  }
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">11</span><span>
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">12</span><span>  <span style=color:#66d9ef>void</span> TestNode2D<span style=color:#f92672>::</span>_bind_methods()
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">13</span><span>  {
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">14</span><span>    <span style=color:#75715e>// Bind a method to this class.
</span></span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">15</span><span><span style=color:#75715e></span>    godot<span style=color:#f92672>::</span>ClassDB<span style=color:#f92672>::</span>bind_method(godot<span style=color:#f92672>::</span>D_METHOD(<span style=color:#e6db74>&#34;say_hello&#34;</span>, <span style=color:#e6db74>&#34;what&#34;</span>), <span style=color:#f92672>&amp;</span>TestNode2D<span style=color:#f92672>::</span>say_hello);
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">16</span><span>  }
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">17</span><span>}</span></span></code></pre></div><p class="text-align-center detail">test_node2d.cpp</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-cpp data-lang=cpp><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 1</span><span><span style=color:#75715e>#ifndef GDEXTENSIONTEST_TEST_NODE2D_HPP
</span></span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 2</span><span><span style=color:#75715e>#define GDEXTENSIONTEST_TEST_NODE2D_HPP
</span></span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 3</span><span><span style=color:#75715e></span>
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 4</span><span><span style=color:#75715e>#include</span> <span style=color:#75715e>&lt;godot_cpp/variant/string.hpp&gt;</span><span style=color:#75715e>
</span></span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 5</span><span><span style=color:#75715e>#include</span> <span style=color:#75715e>&lt;godot_cpp/classes/node2d.hpp&gt;</span><span style=color:#75715e>
</span></span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 6</span><span><span style=color:#75715e></span>
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 7</span><span><span style=color:#66d9ef>namespace</span> gdextension_test
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 8</span><span>{
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 9</span><span>  <span style=color:#75715e>// Although maybe not the best practise if you follow C++ conventions to the letter, but this is easier
</span></span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">10</span><span><span style=color:#75715e></span>  <span style=color:#75715e>// at least on the beta phase where API changes constantly.
</span></span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">11</span><span><span style=color:#75715e></span>  <span style=color:#66d9ef>using</span> <span style=color:#66d9ef>namespace</span> godot;
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">12</span><span>
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">13</span><span>  <span style=color:#66d9ef>class</span> <span style=color:#a6e22e>TestNode2D</span> <span style=color:#f92672>:</span> <span style=color:#66d9ef>public</span> Node2D
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">14</span><span>  {
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">15</span><span>    <span style=color:#75715e>// Macro &#34;magic&#34; to reduce boiler plate and introduce
</span></span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">16</span><span><span style=color:#75715e></span>    <span style=color:#75715e>// our class to Godot and tell from which kind of class it was inherited from.
</span></span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">17</span><span><span style=color:#75715e></span>    GDCLASS(TestNode2D, Node2D)
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">18</span><span>
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">19</span><span>  <span style=color:#66d9ef>protected</span><span style=color:#f92672>:</span>
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">20</span><span>    <span style=color:#75715e>// Required entry point that the API calls to bind our class to Godot.
</span></span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">21</span><span><span style=color:#75715e></span>    <span style=color:#66d9ef>static</span> <span style=color:#66d9ef>void</span> _bind_methods();
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">22</span><span>
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">23</span><span>  <span style=color:#66d9ef>public</span><span style=color:#f92672>:</span>
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">24</span><span>    <span style=color:#75715e>// Our small test method, implementation in cpp file.
</span></span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">25</span><span><span style=color:#75715e></span>    <span style=color:#66d9ef>virtual</span> <span style=color:#66d9ef>void</span> say_hello(<span style=color:#66d9ef>const</span> String<span style=color:#f92672>&amp;</span> what);
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">26</span><span>  };
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">27</span><span>
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">28</span><span>} <span style=color:#75715e>// namespace GDExtensionTest
</span></span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">29</span><span><span style=color:#75715e></span>
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">30</span><span><span style=color:#75715e>#endif </span><span style=color:#75715e>// GDEXTENSIONTEST_TEST_NODE2D_HPP
</span></span></span></code></pre></div><p class="text-align-center detail">test_node2d.hpp</p><p>We won‚Äôt be doing anything fancy in the actual Godot extension and I will be leaving that to you. The C++ bindings should have almost all(?) functions and classes exposed just like in GDScript and even more. The official documentation might not have everything commented but You can read the actual engine code since it is open source and readily <a href=https://github.com/godotengine/godot>available</a>.</p><section class="colored padding-top-font padding-bottom-font margin-top-font"><h2>Author's Note</h2><p>In my opinion, the engine code is clean enough to see what is happening and why. One of the things that I love about Godot is the quality and cleanness of the code.</p></section><p>Next we have to have the proper &ldquo;entry point&rdquo; for the GDExtension for Godot to initialize and load into the running engine instance.</p><p>Let‚Äôs create that in the same &ldquo;src&rdquo; folder :</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-cpp data-lang=cpp><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 1</span><span><span style=color:#75715e>#include</span> <span style=color:#75715e>&lt;godot/gdnative_interface.h&gt;</span><span style=color:#75715e>
</span></span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 2</span><span><span style=color:#75715e>#include</span> <span style=color:#75715e>&lt;godot_cpp/core/class_db.hpp&gt;</span><span style=color:#75715e>
</span></span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 3</span><span><span style=color:#75715e>#include</span> <span style=color:#75715e>&lt;godot_cpp/godot.hpp&gt;</span><span style=color:#75715e>
</span></span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 4</span><span><span style=color:#75715e></span>
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 5</span><span><span style=color:#75715e>// Include our class header.
</span></span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 6</span><span><span style=color:#75715e></span><span style=color:#75715e>#include</span> <span style=color:#75715e>&#34;test_node2d.hpp&#34;</span><span style=color:#75715e>
</span></span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 7</span><span><span style=color:#75715e></span>
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 8</span><span><span style=color:#75715e>// This function will be called to initialize types and other things the extension provides.
</span></span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 9</span><span><span style=color:#75715e>// It can be called multiple times, since the only the minimum initialization level is provided (see below the main entry point.)
</span></span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">10</span><span><span style=color:#75715e></span><span style=color:#66d9ef>void</span> <span style=color:#a6e22e>initializer</span>(godot<span style=color:#f92672>::</span>ModuleInitializationLevel p_level)
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">11</span><span>{
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">12</span><span>  <span style=color:#75715e>// Check if we are in the level we want to initialize stuff in. 
</span></span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">13</span><span><span style=color:#75715e></span>  <span style=color:#75715e>// This prevents multiple overlapping registrations and reference errors during initialization 
</span></span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">14</span><span><span style=color:#75715e></span>  <span style=color:#75715e>// (like parent class missing if initialization is done in wrong level).
</span></span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">15</span><span><span style=color:#75715e></span>  <span style=color:#66d9ef>if</span> (p_level <span style=color:#f92672>==</span> godot<span style=color:#f92672>::</span>MODULE_INITIALIZATION_LEVEL_SCENE)
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">16</span><span>  {
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">17</span><span>    <span style=color:#75715e>// Handle initialization, register our test class to the engine.
</span></span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">18</span><span><span style=color:#75715e></span>    godot<span style=color:#f92672>::</span>ClassDB<span style=color:#f92672>::</span>register_class<span style=color:#f92672>&lt;</span>gdextension_test<span style=color:#f92672>::</span>TestNode2D<span style=color:#f92672>&gt;</span>();
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">19</span><span>  }
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">20</span><span>}
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">21</span><span>
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">22</span><span><span style=color:#75715e>// This function will be called to uninitialize types and other things the extension provided.
</span></span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">23</span><span><span style=color:#75715e>// It can be called multiple times, since the only the minimum initialization level is provided (see below the main entry point.)
</span></span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">24</span><span><span style=color:#75715e></span><span style=color:#66d9ef>void</span> <span style=color:#a6e22e>terminator</span>(godot<span style=color:#f92672>::</span>ModuleInitializationLevel p_level)
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">25</span><span>{
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">26</span><span>  <span style=color:#75715e>// Check if we are in the level we want to uninitialize stuff in.
</span></span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">27</span><span><span style=color:#75715e></span>  <span style=color:#66d9ef>if</span> (p_level <span style=color:#f92672>==</span> godot<span style=color:#f92672>::</span>MODULE_INITIALIZATION_LEVEL_SCENE)
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">28</span><span>  {
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">29</span><span>    <span style=color:#75715e>// Handle uninitialization.
</span></span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">30</span><span><span style=color:#75715e></span>  }
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">31</span><span>}
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">32</span><span>
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">33</span><span><span style=color:#75715e>// Expose as unmangled C ABI.
</span></span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">34</span><span><span style=color:#75715e></span><span style=color:#66d9ef>extern</span> <span style=color:#e6db74>&#34;C&#34;</span>
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">35</span><span>{
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">36</span><span>  <span style=color:#75715e>// Entry point function. Name is important here since it needs to be both unique and defined in the GDExtension manifest.
</span></span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">37</span><span><span style=color:#75715e></span>  GDNativeBool GDN_EXPORT <span style=color:#a6e22e>gdextension_test_library_init</span>(<span style=color:#66d9ef>const</span> GDNativeInterface <span style=color:#f92672>*</span>p_interface, <span style=color:#66d9ef>const</span> GDNativeExtensionClassLibraryPtr p_library, GDNativeInitialization <span style=color:#f92672>*</span>r_initialization)
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">38</span><span>  {
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">39</span><span>    <span style=color:#75715e>// Create &#34;InitObject&#34; that contains all the necessary information how to initialize the extension.
</span></span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">40</span><span><span style=color:#75715e></span>    godot<span style=color:#f92672>::</span>GDExtensionBinding<span style=color:#f92672>::</span>InitObject init_obj(p_interface, p_library, r_initialization);
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">41</span><span>    <span style=color:#75715e>// Set the initializer function for the extension. Can be a lambda.
</span></span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">42</span><span><span style=color:#75715e></span>    init_obj.register_initializer(initializer);
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">43</span><span>    <span style=color:#75715e>// Set the terminator (&#34;uninitializer&#34;) function for the extension. Can be a lambda.
</span></span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">44</span><span><span style=color:#75715e></span>    init_obj.register_terminator(terminator);
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">45</span><span>    <span style=color:#75715e>// Set the minimum initialization level the above functions are called within. 
</span></span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">46</span><span><span style=color:#75715e></span>    init_obj.set_minimum_library_initialization_level(godot<span style=color:#f92672>::</span>MODULE_INITIALIZATION_LEVEL_SCENE);
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">47</span><span>    <span style=color:#66d9ef>return</span> init_obj.init();
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">48</span><span>  }
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">49</span><span>}</span></span></code></pre></div><p class="text-align-center detail">gdextension.cpp</p><p>There. This should be all of the coding for the article. Next we will need to create a gdextension file to introduce our extension to Godot. This is Godot specific file and let‚Äôs go up one folder to &ldquo;gdextension_test&rdquo; and in there create the following file:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-plaintext data-lang=plaintext><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1</span><span>[configuration]
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">2</span><span>entry_symbol = &#34;@GDEXTENSION_ENTRY_POINT@_library_init&#34;
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">3</span><span>
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">4</span><span>[libraries]
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">5</span><span>windows.64 = &#34;@TARGET@.dll&#34;</span></span></code></pre></div><p class="text-align-center detail">gdextension.in</p><p>Notice the weird &ldquo;@TARGET@&rdquo; and &ldquo;@GDEXTENSION_ENTRY_POINT@&rdquo; words? Those are for our build tool to replace. Same goes for the file extension &ldquo;.in&rdquo; which is mostly used for build tool configuration in which build tool generates a file using the &ldquo;.in&rdquo; file as a template. And speaking of which: we have the code, now how do we build it?</p><p>Godot and its sub projects mainly use SCons as a build tool. It is quite popular and available for almost any relevant platform. It is Python programming language based and because of that, it can contain quite complex build scripts that use Python provided functionality. Here however we will use CMake. Some sub projects (like godot-cpp) supports CMake so we don‚Äôt have to modify any Godot specific code.</p><section class="colored padding-top-font padding-bottom-font margin-top-font"><h2>Author's Note</h2><p>It has been awhile since I have used SCons but I regularly use CMake because it is used just about everywhere. This is the main reason we will use CMake here since I‚Äôd need to study SCons more to actually write about it confidently.</p><p>CMake has its warts compared to SCons such as not having a proper scripting support (yes yes, you can script it but comparing it to a beast like Python is quite unfair) resulting in lots of platform specific custom commands if you are doing something more complex.</p><p>On the other hand CMake usually is less verbose than SCons and has a solid support for multiple compiler frameworks (&ldquo;kits&rdquo;), project generators and external libraries. The way CMake exposes these external libraries and their includes, import libraries and so on make it really a breeze to work with.</p></section><p>Let‚Äôs stay in the &ldquo;gdextension_test&rdquo; folder and create the following build script :</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-cmake data-lang=cmake><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 1</span><span><span style=color:#75715e># Setup requirement for this build file.
</span></span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 2</span><span><span style=color:#75715e></span>CMAKE_MINIMUM_REQUIRED(<span style=color:#e6db74>VERSION</span> <span style=color:#e6db74>3.23</span> <span style=color:#e6db74>FATAL_ERROR</span>)<span style=color:#960050;background-color:#1e0010>
</span></span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 3</span><span><span style=color:#960050;background-color:#1e0010></span><span style=color:#75715e># Setup project name.
</span></span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 4</span><span><span style=color:#75715e></span>PROJECT(<span style=color:#e6db74>gdextension_test</span>)<span style=color:#960050;background-color:#1e0010>
</span></span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 5</span><span><span style=color:#960050;background-color:#1e0010></span><span style=color:#75715e># Calculate target bit count if not given. 
</span></span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 6</span><span><span style=color:#75715e># This is also used in GDExtension platform specifiers due to the possibility of
</span></span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 7</span><span><span style=color:#75715e># having separate builds for multiple different platforms.
</span></span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 8</span><span><span style=color:#75715e></span>IF (<span style=color:#e6db74>NOT</span> <span style=color:#e6db74>DEFINED</span> <span style=color:#e6db74>BITS</span>)<span style=color:#960050;background-color:#1e0010>
</span></span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 9</span><span><span style=color:#960050;background-color:#1e0010></span>  MATH(<span style=color:#e6db74>EXPR</span> <span style=color:#e6db74>BITS</span> <span style=color:#e6db74>&#34;8*${CMAKE_SIZEOF_VOID_P}&#34;</span>)<span style=color:#960050;background-color:#1e0010>
</span></span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">10</span><span><span style=color:#960050;background-color:#1e0010></span>ENDIF()<span style=color:#960050;background-color:#1e0010>
</span></span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">11</span><span><span style=color:#960050;background-color:#1e0010></span><span style=color:#75715e># Set TARGET variable so we don&#39;t need to use the monstrosity below repeatedly.
</span></span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">12</span><span><span style=color:#75715e></span>SET(<span style=color:#e6db74>TARGET</span> <span style=color:#f92672>${</span>PROJECT_NAME<span style=color:#f92672>}</span><span style=color:#e6db74>.</span><span style=color:#f92672>${</span>CMAKE_SYSTEM_NAME<span style=color:#f92672>}</span><span style=color:#e6db74>.</span><span style=color:#f92672>${</span>CMAKE_BUILD_TYPE<span style=color:#f92672>}</span><span style=color:#e6db74>.</span><span style=color:#f92672>${</span>BITS<span style=color:#f92672>}</span>)<span style=color:#960050;background-color:#1e0010>
</span></span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">13</span><span><span style=color:#960050;background-color:#1e0010></span><span style=color:#75715e># Make it lower case.
</span></span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">14</span><span><span style=color:#75715e></span>STRING(<span style=color:#e6db74>TOLOWER</span> <span style=color:#f92672>${</span>TARGET<span style=color:#f92672>}</span> <span style=color:#e6db74>TARGET</span>)<span style=color:#960050;background-color:#1e0010>
</span></span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">15</span><span><span style=color:#960050;background-color:#1e0010></span><span style=color:#75715e># Find all cpp files and put those in SOURCES variable.
</span></span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">16</span><span><span style=color:#75715e></span>FILE(<span style=color:#e6db74>GLOB_RECURSE</span> <span style=color:#e6db74>SOURCES</span> <span style=color:#e6db74>src/*.c**</span>)<span style=color:#960050;background-color:#1e0010>
</span></span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">17</span><span><span style=color:#960050;background-color:#1e0010></span><span style=color:#75715e># Create build target from the name and sources we setup above.
</span></span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">18</span><span><span style=color:#75715e></span>ADD_LIBRARY(<span style=color:#f92672>${</span>TARGET<span style=color:#f92672>}</span> <span style=color:#e6db74>SHARED</span> <span style=color:#f92672>${</span>SOURCES<span style=color:#f92672>}</span>)<span style=color:#960050;background-color:#1e0010>
</span></span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">19</span><span><span style=color:#960050;background-color:#1e0010></span><span style=color:#75715e># Add godot::cpp as private dependency.
</span></span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">20</span><span><span style=color:#75715e></span>TARGET_LINK_LIBRARIES(<span style=color:#f92672>${</span>TARGET<span style=color:#f92672>}</span> <span style=color:#e6db74>PRIVATE</span> <span style=color:#e6db74>godot::cpp</span>)<span style=color:#960050;background-color:#1e0010>
</span></span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">21</span><span><span style=color:#960050;background-color:#1e0010></span><span style=color:#75715e># If we are using Visual Studio compiler, add some options.
</span></span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">22</span><span><span style=color:#75715e></span>IF(<span style=color:#e6db74>&#34;${CMAKE_CXX_COMPILER_ID}&#34;</span> <span style=color:#e6db74>STREQUAL</span> <span style=color:#e6db74>&#34;MSVC&#34;</span>)<span style=color:#960050;background-color:#1e0010>
</span></span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">23</span><span><span style=color:#960050;background-color:#1e0010></span>  <span style=color:#75715e># Enable C++17 support.
</span></span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">24</span><span><span style=color:#75715e></span>  TARGET_COMPILE_OPTIONS(<span style=color:#f92672>${</span>TARGET<span style=color:#f92672>}</span> <span style=color:#e6db74>PRIVATE</span> <span style=color:#e6db74>/std:c++17</span>)<span style=color:#960050;background-color:#1e0010>
</span></span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">25</span><span><span style=color:#960050;background-color:#1e0010></span>  IF(<span style=color:#e6db74>CMAKE_BUILD_TYPE</span> <span style=color:#e6db74>MATCHES</span> <span style=color:#e6db74>DEBUG</span>)<span style=color:#960050;background-color:#1e0010>
</span></span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">26</span><span><span style=color:#960050;background-color:#1e0010></span>    <span style=color:#75715e># If target is debug build, setup proper runtime library (mainly to match godot-cpp one).
</span></span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">27</span><span><span style=color:#75715e></span>    SET(<span style=color:#e6db74>CMAKE_MSVC_RUNTIME_LIBRARY</span> <span style=color:#e6db74>&#34;MultiThreaded$&lt;$&lt;CONFIG:Debug&gt;:Debug&gt;DLL&#34;</span>)<span style=color:#960050;background-color:#1e0010>
</span></span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">28</span><span><span style=color:#960050;background-color:#1e0010></span>  ENDIF(<span style=color:#e6db74>CMAKE_BUILD_TYPE</span> <span style=color:#e6db74>MATCHES</span> <span style=color:#e6db74>DEBUG</span>)<span style=color:#960050;background-color:#1e0010>
</span></span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">29</span><span><span style=color:#960050;background-color:#1e0010></span>ENDIF()<span style=color:#960050;background-color:#1e0010>
</span></span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">30</span><span><span style=color:#960050;background-color:#1e0010></span><span style=color:#75715e># Create a proper GDExtension configuration filename.
</span></span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">31</span><span><span style=color:#75715e></span>STRING(<span style=color:#e6db74>TOLOWER</span> <span style=color:#e6db74>&#34;${PROJECT_NAME}.gdextension&#34;</span> <span style=color:#e6db74>GDEXTENSION_CONFIGURATION_FILE</span>)<span style=color:#960050;background-color:#1e0010>
</span></span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">32</span><span><span style=color:#960050;background-color:#1e0010></span><span style=color:#75715e># Create entry point name from project name.
</span></span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">33</span><span><span style=color:#75715e></span>STRING(<span style=color:#e6db74>TOLOWER</span> <span style=color:#f92672>${</span>PROJECT_NAME<span style=color:#f92672>}</span> <span style=color:#e6db74>GDEXTENSION_ENTRY_POINT</span>)<span style=color:#960050;background-color:#1e0010>
</span></span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">34</span><span><span style=color:#960050;background-color:#1e0010></span><span style=color:#75715e># Create GDExtension configuration file from our configuration template.
</span></span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">35</span><span><span style=color:#75715e></span>CONFIGURE_FILE(<span style=color:#e6db74>gdextension.in</span> <span style=color:#f92672>${</span>GDEXTENSION_CONFIGURATION_FILE<span style=color:#f92672>}</span>)<span style=color:#960050;background-color:#1e0010>
</span></span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">36</span><span><span style=color:#960050;background-color:#1e0010></span><span style=color:#75715e># Specify runtime installation target (this is the actual library).
</span></span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">37</span><span><span style=color:#75715e></span>INSTALL(<span style=color:#e6db74>TARGETS</span> <span style=color:#f92672>${</span>TARGET<span style=color:#f92672>}</span> <span style=color:#e6db74>CONFIGURATIONS</span> <span style=color:#e6db74>Debug</span> <span style=color:#e6db74>RUNTIME</span> <span style=color:#e6db74>DESTINATION</span> <span style=color:#f92672>${</span>PROJECT_NAME<span style=color:#f92672>}</span>)<span style=color:#960050;background-color:#1e0010>
</span></span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">38</span><span><span style=color:#960050;background-color:#1e0010></span><span style=color:#75715e># Specify files installation target (this is the configuration file).
</span></span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">39</span><span><span style=color:#75715e></span>INSTALL(<span style=color:#e6db74>FILES</span> <span style=color:#e6db74>&#34;${CMAKE_CURRENT_BINARY_DIR}/${GDEXTENSION_CONFIGURATION_FILE}&#34;</span> <span style=color:#e6db74>CONFIGURATIONS</span> <span style=color:#e6db74>Release</span> <span style=color:#e6db74>Debug</span> <span style=color:#e6db74>DESTINATION</span> <span style=color:#f92672>${</span>PROJECT_NAME<span style=color:#f92672>}</span>)</span></span></code></pre></div><p class="text-align-center detail">CMakeLists.txt</p><section class="colored padding-top-font padding-bottom-font margin-top-font"><h2>Author's Note</h2><p>This build script is made only for debug builds. Release builds may have more specific configuration both related to its dependencies and the library itself. I will not go through the release build here since it usually is highly project dependent.</p></section><p>If we were to issue build command here we would get all sorts of errors related to not finding godot_cpp dependency. As such we will need to create a multi-project build script that our extension is only a part of.</p><h3 id=project-root-folder>Project root folder</h3><p>Go up one folder to get to the root folder of project.</p><p>Add <em>another</em> build script here :</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-cmake data-lang=cmake><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1</span><span><span style=color:#75715e># Setup requirement for this build file.
</span></span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">2</span><span><span style=color:#75715e></span>CMAKE_MINIMUM_REQUIRED(<span style=color:#e6db74>VERSION</span> <span style=color:#e6db74>3.23</span> <span style=color:#e6db74>FATAL_ERROR</span>)<span style=color:#960050;background-color:#1e0010>
</span></span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">3</span><span><span style=color:#960050;background-color:#1e0010></span><span style=color:#75715e># Setup project name.
</span></span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">4</span><span><span style=color:#75715e></span>PROJECT(<span style=color:#e6db74>HowToStartMakingGDExtensionsForGodot</span>)<span style=color:#960050;background-color:#1e0010>
</span></span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">5</span><span><span style=color:#960050;background-color:#1e0010></span><span style=color:#75715e># Add godot-cpp as part of this multi-project build.
</span></span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">6</span><span><span style=color:#75715e></span>ADD_SUBDIRECTORY(<span style=color:#e6db74>external/godot-cpp</span>)<span style=color:#960050;background-color:#1e0010>
</span></span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">7</span><span><span style=color:#960050;background-color:#1e0010></span><span style=color:#75715e># Add the extension as part of this multi-project build.
</span></span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">8</span><span><span style=color:#75715e></span>ADD_SUBDIRECTORY(<span style=color:#e6db74>gdextension_test</span>)</span></span></code></pre></div><p class="text-align-center detail">CMakeLists.txt</p><p>As you can see, here we add both the godot-cpp project and our extension as part of this root build script. Both of these folders have their own &ldquo;CMakeLists.txt&rdquo; files that handle their own build process while inheriting the settings set to this root build script and still injecting themselves into the build process. As an example, CMake knows that &ldquo;gdextension_test&rdquo; is dependent of &ldquo;godot::cpp&rdquo; namespace that the &ldquo;godot_cpp&rdquo; project introduces so it knows it needs to be built before.</p><p>Now we are close to actually building the whole shenanigans but in order to make the building easier, lets create a Visual Studio CMake configuration file to handle the build process and correct installation direction inside our Godot project. Still remaining at the root of the whole project, create the following file :</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-json data-lang=json><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 1</span><span>{
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 2</span><span>  <span style=color:#f92672>&#34;configurations&#34;</span>: [
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 3</span><span>    {
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 4</span><span>      <span style=color:#f92672>&#34;name&#34;</span>: <span style=color:#e6db74>&#34;x64-Debug&#34;</span>,
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 5</span><span>      <span style=color:#f92672>&#34;generator&#34;</span>: <span style=color:#e6db74>&#34;Ninja&#34;</span>,
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 6</span><span>      <span style=color:#f92672>&#34;configurationType&#34;</span>: <span style=color:#e6db74>&#34;Debug&#34;</span>,
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 7</span><span>      <span style=color:#f92672>&#34;inheritEnvironments&#34;</span>: [ <span style=color:#e6db74>&#34;msvc_x64_x64&#34;</span> ],
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 8</span><span>      <span style=color:#f92672>&#34;buildRoot&#34;</span>: <span style=color:#e6db74>&#34;${projectDir}\\out\\build\\${name}&#34;</span>,
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 9</span><span>      <span style=color:#f92672>&#34;installRoot&#34;</span>: <span style=color:#e6db74>&#34;${projectDir}\\game\\extensions&#34;</span>,
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">10</span><span>      <span style=color:#f92672>&#34;cmakeCommandArgs&#34;</span>: <span style=color:#e6db74>&#34;&#34;</span>,
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">11</span><span>      <span style=color:#f92672>&#34;buildCommandArgs&#34;</span>: <span style=color:#e6db74>&#34;&#34;</span>,
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">12</span><span>      <span style=color:#f92672>&#34;ctestCommandArgs&#34;</span>: <span style=color:#e6db74>&#34;&#34;</span>
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">13</span><span>    }
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">14</span><span>  ]
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">15</span><span>}</span></span></code></pre></div><p class="text-align-center detail">CMakeSettings.json</p><h2 id=build>Build</h2><p>Before starting the actual Visual Studio, start Visual Studio installer, and make sure you have CMake tools installed in the &ldquo;Invidual components&rdquo; section :</p><p><section><figure><a href=/posts/how-to-start-making-gdextensions-for-godot/vs-installer_hu1ce0a9e414536293450f8c411ee793f0_12350_655x403_resize_q75_h2_box_2.webp><img src=/posts/how-to-start-making-gdextensions-for-godot/vs-installer_hu1ce0a9e414536293450f8c411ee793f0_12350_655x403_resize_q75_h2_box_2.webp alt="Project structure"></a><figcaption class=detail>Visual studio installer.</figcaption></figure></section></p><p>Next start Visual Studio and open the project root with &ldquo;Open a local folder&rdquo; option :</p><p><section><figure><a href=/posts/how-to-start-making-gdextensions-for-godot/vs-open-local-folder_hub4fb0f01293df432ef4c5164b0c90b4a_17148_589x655_resize_q75_h2_box_2.webp><img src=/posts/how-to-start-making-gdextensions-for-godot/vs-open-local-folder_hub4fb0f01293df432ef4c5164b0c90b4a_17148_589x655_resize_q75_h2_box_2.webp alt="Project structure"></a><figcaption class=detail>Open local folder.</figcaption></figure></section></p><p>Then on the solution explorer click on the following :</p><p><section><figure><a href=/posts/how-to-start-making-gdextensions-for-godot/vs-change-view_hu85cb6aa81139638cb41a751ab2914188_16392_709x505_resize_q75_h2_box_2.webp><img src=/posts/how-to-start-making-gdextensions-for-godot/vs-change-view_hu85cb6aa81139638cb41a751ab2914188_16392_709x505_resize_q75_h2_box_2.webp alt="Project structure"></a><figcaption class=detail>Change view.</figcaption></figure></section></p><p>Then double click on &ldquo;CMake Targets View&rdquo;:</p><p><section><figure><a href=/posts/how-to-start-making-gdextensions-for-godot/vs-cmake-targets-view_hu3ec71bad3a604724400e7d1b93d5b6bf_11548_712x235_resize_q75_h2_box_2.webp><img src=/posts/how-to-start-making-gdextensions-for-godot/vs-cmake-targets-view_hu3ec71bad3a604724400e7d1b93d5b6bf_11548_712x235_resize_q75_h2_box_2.webp alt="Project structure"></a><figcaption class=detail>CMake Targets View.</figcaption></figure></section></p><p>In here we can right click on the &ldquo;HowToStartMakingGDExtensionsForGodot&rdquo; and click &ldquo;Build All&rdquo;.</p><p><section><figure><a href=/posts/how-to-start-making-gdextensions-for-godot/vs-build-all_hu7286d1b92d09c6a48994ee9731f5f009_18174_720x476_resize_q75_h2_box_2.webp><img src=/posts/how-to-start-making-gdextensions-for-godot/vs-build-all_hu7286d1b92d09c6a48994ee9731f5f009_18174_720x476_resize_q75_h2_box_2.webp alt="Project structure"></a><figcaption class=detail>Build all.</figcaption></figure></section></p><p>When first issuing this command it will take some time to build. Majority of the time is spent on building godot-cpp project and only fraction is spent on building the actual extension. Worry not, whole rebuild of the godot-cpp dependency is rarely needed and the following builds issued only builds your extension and even parts of that are cached as well.</p><p>After the build, you still need to install the extension. From the &ldquo;Build&rdquo; menu on top, select &ldquo;Install HowToStartMakingGDExtensionsForGodot&rdquo; :</p><p><section><figure><a href=/posts/how-to-start-making-gdextensions-for-godot/vs-install_hu009df654e46f1a135f0e21c2c87845af_7146_634x196_resize_q75_h2_box_2.webp><img src=/posts/how-to-start-making-gdextensions-for-godot/vs-install_hu009df654e46f1a135f0e21c2c87845af_7146_634x196_resize_q75_h2_box_2.webp alt="Project structure"></a><figcaption class=detail>Install.</figcaption></figure></section></p><p>Now you can check the &ldquo;extensions&rdquo; folder under the &ldquo;game&rdquo; folder and it should show something like :</p><p><section><figure><a href=/posts/how-to-start-making-gdextensions-for-godot/game-extensions-folder_hue75249a94c330333894a1236a9bd1f2e_2040_610x115_resize_q75_h2_box_2.webp><img src=/posts/how-to-start-making-gdextensions-for-godot/game-extensions-folder_hue75249a94c330333894a1236a9bd1f2e_2040_610x115_resize_q75_h2_box_2.webp alt="Project structure"></a><figcaption class=detail>Folder "game/extensions".</figcaption></figure></section></p><p>And inside that &ldquo;gdextension_test&rdquo; folder you should find :</p><p><section><figure><a href=/posts/how-to-start-making-gdextensions-for-godot/gdextension_test-folder-results_hu3bae19db6dfd67a61a96a503070185ec_5718_643x151_resize_q75_h2_box_2.webp><img src=/posts/how-to-start-making-gdextensions-for-godot/gdextension_test-folder-results_hu3bae19db6dfd67a61a96a503070185ec_5718_643x151_resize_q75_h2_box_2.webp alt="Project structure"></a><figcaption class=detail>Results.</figcaption></figure></section></p><p>Phew!</p><h2 id=testing>Testing</h2><p>Now that we have the extension built, let‚Äôs test it. Fire up Godot again and open the project inside &ldquo;game&rdquo; folder. If all is well the debug console should not contain any errors. Or if there were any errors they should not be related to our extension :</p><p><section><figure><a href=/posts/how-to-start-making-gdextensions-for-godot/start-godot_hu4194d2d3388744d82afd00f96e025f34_15964_720x270_resize_q75_h2_box_2.webp><img src=/posts/how-to-start-making-gdextensions-for-godot/start-godot_hu4194d2d3388744d82afd00f96e025f34_15964_720x270_resize_q75_h2_box_2.webp alt="Project structure"></a><figcaption class=detail>Start Godot.</figcaption></figure></section></p><p>Now create a new 2d scene :</p><p><section><figure><a href=/posts/how-to-start-making-gdextensions-for-godot/create-new-2d-scene_hu1aaeda74687cdb3ebd88b658a8919689_11828_598x523_resize_q75_h2_box_2.webp><img src=/posts/how-to-start-making-gdextensions-for-godot/create-new-2d-scene_hu1aaeda74687cdb3ebd88b658a8919689_11828_598x523_resize_q75_h2_box_2.webp alt="Project structure"></a><figcaption class=detail>Create new 2D Scene.</figcaption></figure></section></p><p>Add our node to the root by searching it :</p><p><section><figure><a href=/posts/how-to-start-making-gdextensions-for-godot/search-node_hu721a674f4fd1e9d6f0ef4fde2c6c42ae_11096_720x579_resize_q75_h2_box_2.webp><img src=/posts/how-to-start-making-gdextensions-for-godot/search-node_hu721a674f4fd1e9d6f0ef4fde2c6c42ae_11096_720x579_resize_q75_h2_box_2.webp alt="Project structure"></a><figcaption class=detail>Search the node.</figcaption></figure></section></p><p>Create a new script that derives from TestNode2D :</p><p><section><figure><a href=/posts/how-to-start-making-gdextensions-for-godot/create-new-script_hu60a5238d46f4d35b0c7ad735a1f5dad0_17282_685x616_resize_q75_h2_box_2.webp><img src=/posts/how-to-start-making-gdextensions-for-godot/create-new-script_hu60a5238d46f4d35b0c7ad735a1f5dad0_17282_685x616_resize_q75_h2_box_2.webp alt="Project structure"></a><figcaption class=detail>Create new script.</figcaption></figure></section></p><p>Open the newly created test script and add call to our native method :</p><p><section><figure><a href=/posts/how-to-start-making-gdextensions-for-godot/create-new-script-editor_hu11393d560fda46f1284fe1e09124c487_6692_720x266_resize_q75_h2_box_2.webp><img src=/posts/how-to-start-making-gdextensions-for-godot/create-new-script-editor_hu11393d560fda46f1284fe1e09124c487_6692_720x266_resize_q75_h2_box_2.webp alt="Project structure"></a><figcaption class=detail>Create new script (editor).</figcaption></figure></section></p><p>Assign the test script to our newly created TestNode2D node :</p><p><section><figure><a href=/posts/how-to-start-making-gdextensions-for-godot/create-testnode2d_hu4548a2a071660688f097c96047312c3c_12274_634x670_resize_q75_h2_box_2.webp><img src=/posts/how-to-start-making-gdextensions-for-godot/create-testnode2d_hu4548a2a071660688f097c96047312c3c_12274_634x670_resize_q75_h2_box_2.webp alt="Project structure"></a><figcaption class=detail>Create TestNode2D.</figcaption></figure></section></p><p>Make sure both script and scene are saved. Expand &ldquo;Output&rdquo; tab so you can see engine logs :</p><p><section><figure><a href=/posts/how-to-start-making-gdextensions-for-godot/expand-logs_hu243f65eca4c337ec856b3d0e025b3f70_12204_720x177_resize_q75_h2_box_2.webp><img src=/posts/how-to-start-making-gdextensions-for-godot/expand-logs_hu243f65eca4c337ec856b3d0e025b3f70_12204_720x177_resize_q75_h2_box_2.webp alt="Project structure"></a><figcaption class=detail>Expand logs.</figcaption></figure></section></p><p>Run the project and You should see print from native code (the engine might notify that You don‚Äôt have start up scene set up, just instruct it to use the current one) :</p><p><section><figure><a href=/posts/how-to-start-making-gdextensions-for-godot/run-game_hu755c83460fa6010c2e0eef0531854c25_6774_720x528_resize_q75_h2_box_2.webp><img src=/posts/how-to-start-making-gdextensions-for-godot/run-game_hu755c83460fa6010c2e0eef0531854c25_6774_720x528_resize_q75_h2_box_2.webp alt="Project structure"></a><figcaption class=detail>Run game.</figcaption></figure></section></p><p>It‚Äôs alive!</p><h2 id=debug>Debug</h2><p>First we need to configure how to start the debugging process from Visual Studio. We cannot directly attach the debugger to the editor, since the editor will spawn different engine process to play the game and the scene and our debugger is not wise enough to attach to that sub process. This means we need to create a separate debugging configuration that will start our scene we wish to debug and attach the debugger to that one.</p><p>From the CMake Targets View right click on the &ldquo;gdextension_test.windows.debug.64&rdquo;, select &ldquo;Debug and Launch Settings&rdquo; and pick the one that has (Install) on it :</p><p><section><figure><a href=/posts/how-to-start-making-gdextensions-for-godot/vs-debug-and-launch-settings_hu5d95e32c6ec36ffe43feac57a4856357_12372_720x301_resize_q75_h2_box_2.webp><img src=/posts/how-to-start-making-gdextensions-for-godot/vs-debug-and-launch-settings_hu5d95e32c6ec36ffe43feac57a4856357_12372_720x301_resize_q75_h2_box_2.webp alt="Project structure"></a><figcaption class=detail>Debug and launch settings.</figcaption></figure></section></p><p>This will open JSON editor and You need to adjust the following template from Your own setup :</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-json data-lang=json><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 1</span><span>{
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 2</span><span>  <span style=color:#f92672>&#34;version&#34;</span>: <span style=color:#e6db74>&#34;0.2.1&#34;</span>,
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 3</span><span>  <span style=color:#f92672>&#34;defaults&#34;</span>: {},
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 4</span><span>  <span style=color:#f92672>&#34;configurations&#34;</span>: [
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 5</span><span>    {
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 6</span><span>      <span style=color:#f92672>&#34;type&#34;</span>: <span style=color:#e6db74>&#34;dll&#34;</span>,
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 7</span><span>      <span style=color:#f92672>&#34;exe&#34;</span>: <span style=color:#e6db74>&#34;&lt;path to Godot editor exe&gt;&#34;</span>,
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 8</span><span>      <span style=color:#f92672>&#34;args&#34;</span>: [ <span style=color:#e6db74>&#34;test_scene.tscn&#34;</span> ],
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 9</span><span>      <span style=color:#f92672>&#34;project&#34;</span>: <span style=color:#e6db74>&#34;CMakeLists.txt&#34;</span>,
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">10</span><span>      <span style=color:#f92672>&#34;currentDir&#34;</span>: <span style=color:#e6db74>&#34;&lt;path to the game folder inside the extension project&gt;&#34;</span>,
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">11</span><span>      <span style=color:#f92672>&#34;projectTarget&#34;</span>: <span style=color:#e6db74>&#34;gdextension_test.windows.debug.64.dll (Install) (gdextension_test\\gdextension_test.windows.debug.64.dll)&#34;</span>,
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">12</span><span>      <span style=color:#f92672>&#34;name&#34;</span>: <span style=color:#e6db74>&#34;Debug scene&#34;</span>
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">13</span><span>    }
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">14</span><span>  ]
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">15</span><span>}</span></span></code></pre></div><p class="text-align-center detail">launch.vs.json</p><p>For example my JSON looks like this :</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-json data-lang=json><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 1</span><span>{
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 2</span><span>  <span style=color:#f92672>&#34;version&#34;</span>: <span style=color:#e6db74>&#34;0.2.1&#34;</span>,
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 3</span><span>  <span style=color:#f92672>&#34;defaults&#34;</span>: {},
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 4</span><span>  <span style=color:#f92672>&#34;configurations&#34;</span>: [
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 5</span><span>    {
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 6</span><span>      <span style=color:#f92672>&#34;type&#34;</span>: <span style=color:#e6db74>&#34;dll&#34;</span>,
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 7</span><span>      <span style=color:#f92672>&#34;exe&#34;</span>: <span style=color:#e6db74>&#34;C:\\dev\\sdk\\godot\\Godot_v4.0-beta4_win64.exe&#34;</span>,
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 8</span><span>      <span style=color:#f92672>&#34;args&#34;</span>: [ <span style=color:#e6db74>&#34;test_scene.tscn&#34;</span> ],
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 9</span><span>      <span style=color:#f92672>&#34;project&#34;</span>: <span style=color:#e6db74>&#34;CMakeLists.txt&#34;</span>,
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">10</span><span>      <span style=color:#f92672>&#34;currentDir&#34;</span>: <span style=color:#e6db74>&#34;C:\\dev\\projects\\How to start making GDExtensions for Godot\\game&#34;</span>,
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">11</span><span>      <span style=color:#f92672>&#34;projectTarget&#34;</span>: <span style=color:#e6db74>&#34;gdextension_test.windows.debug.64.dll (Install) (gdextension_test\\gdextension_test.windows.debug.64.dll)&#34;</span>,
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">12</span><span>      <span style=color:#f92672>&#34;name&#34;</span>: <span style=color:#e6db74>&#34;Debug scene&#34;</span>
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">13</span><span>    }
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">14</span><span>  ]
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">15</span><span>}</span></span></code></pre></div><p class="text-align-center detail">launch.vs.json</p><section class="colored padding-top-font padding-bottom-font margin-top-font"><h2>Author's Note</h2><p>I had few problems starting the scene with full path without setting the working directory (&ldquo;currentDir&rdquo; here). It might be because I have spaces in the path or it might be a bug in Godot 4.0 beta. Either way this works so let‚Äôs use the above for now.</p></section><p>Now go and put a breakpoint in the &ldquo;test_node2d.cpp&rdquo; file like this :</p><p><section><figure><a href=/posts/how-to-start-making-gdextensions-for-godot/vs-breakpoint_hubca645be5cc47d76e6fcc13a07c7f280_11514_720x273_resize_q75_h2_box_2.webp><img src=/posts/how-to-start-making-gdextensions-for-godot/vs-breakpoint_hubca645be5cc47d76e6fcc13a07c7f280_11514_720x273_resize_q75_h2_box_2.webp alt="Project structure"></a><figcaption class=detail>Visual Studio breakpoint.</figcaption></figure></section></p><p>From the upper start menu select &ldquo;Debug scene&rdquo; and press the play button :</p><p><section><figure><a href=/posts/how-to-start-making-gdextensions-for-godot/vs-debug_hu3f45aa739d9004534256fa6908e86389_17074_720x322_resize_q75_h2_box_2.webp><img src=/posts/how-to-start-making-gdextensions-for-godot/vs-debug_hu3f45aa739d9004534256fa6908e86389_17074_720x322_resize_q75_h2_box_2.webp alt="Project structure"></a><figcaption class=detail>Launch debug.</figcaption></figure></section></p><p>Voil√†! It should break at the correct position :</p><p><section><figure><a href=/posts/how-to-start-making-gdextensions-for-godot/vs-debug-break_hucf8e43c8b4e8de9b39d86bbb2f3f1320_12682_720x232_resize_q75_h2_box_2.webp><img src=/posts/how-to-start-making-gdextensions-for-godot/vs-debug-break_hucf8e43c8b4e8de9b39d86bbb2f3f1320_12682_720x232_resize_q75_h2_box_2.webp alt="Project structure"></a><figcaption class=detail>Visual Studio debug break.</figcaption></figure></section></p><h2 id=further-studying>Further studying</h2><p>Now this will get you started on the journey of native extensions for Godot. Still many questions remain that I have yet to get answers to myself. I plan to address hopefully some of them in the future and maybe write about them if people show interest ‚Äî do You have a topic concerning Godot You‚Äôd like for me to write about, please tell me in the comments. Here are some of the things I‚Äôd like to get back to at some point.</p><h3 id=static-linking-in-gdextensions>Static linking in GDExtensions</h3><p>Some of the platforms like HTML5/WASM, IOS and presumably some of the consoles cannot use dynamically linked libraries. I presume Godot team has thought of this that we can use GDExtensions in those as well. GDExtension configuration files can point to statically linked &ldquo;.a&rdquo; libraries as well and I think using the project export functionality will create some form of &ldquo;extension loader&rdquo; that invokes entry points in statically linked environments during engine startup.</p><section class="colored padding-top-font padding-bottom-font margin-top-font"><h2>Author's Note</h2><p>Briefly checking Godot engine platform export source codes, it seems that this is the case at least for IOS as the &ldquo;.a&rdquo; libraries are presumed to be linked and it indeed generates some form of initializer code for it.</p><p>WASM on the other hand seems to use Emscripten‚Äôs dynamic linking capability although this is deemed bad for performance. Maybe WASM could utilize the same method as IOS so it does not need to resolve in dynamic loading not yet supported fully in WASM.</p><p>More testing is needed to check how it works under the hood.</p></section><h3 id=unit-testing>Unit testing</h3><p>Unreal Engine has a form of smaller unit testing capability built inside the editor. Godot seems to have some form of unit testing but it is only on the native side. While this is still better than nothing, GDScript could need same kind of love to enable unit tests (it has &ldquo;annotations&rdquo; so maybe via those?). Especially when project grows larger and in &ldquo;corporate&rdquo; world with larger teams.</p><h3 id=gdextension-development-process>GDExtension development process</h3><p>There are some pain points in the whole process with developing GDExtensions with native code. I am not sure if this is a problem with other platforms but at least with Windows there are file locking problems that prevent a smooth development iteration. Each change in extension requires editor restart to unlock the previously loaded version before installing the new version. This undermines the GDNative versus GDExtension benefit of dynamically loading extensions.</p><h2 id=git-repository>Git repository</h2><p>Above article has a public Git repository for You to fork and study, it can be found <a href=https://github.com/MachineMakesNoise/HowToStartMakingGDExtensionsForGodot>here</a>.</p><h2 id=epilogue>Epilogue</h2><p>Thank You for reading this article. Personally, this was first ever written article/tutorial outside my day job. Hopefully you enjoyed it and follows, mentions, comments, sponsoring and so on are more than welcome so I can get a bit of feedback and maybe continue writing these üòä<section class="colored padding-top-font padding-bottom-font margin-top-font"><h2>Author's Note</h2><p>Maybe I could commit something back to main Godot project too at some point however I must confess I have not contributed that much to open source projects. I hope this will change. Nothing related to open source generally, just time constraints have prevented me to invest time in making patches and articles &ldquo;good enough&rdquo; for public release.</p></section></p></article></main><footer class=margin-top-font><div class="ascii buttons no-print"><div class="button margin-right-font"><a id=comments-button class=disabled>Comments<br></a><noscript><span class=font-size-60pct>Comments require Javascript</span></noscript><script>var commentsButton=document.getElementById("comments-button");commentsButton&&(commentsButton.href="#comments",commentsButton.classList.remove("disabled"),commentsButton.classList.add("enabled"),commentsButton.onclick=function(){commentsButton.onclick=void 0;var e=document.createElement("script");e.setAttribute("type","text/javascript"),e.setAttribute("src","https://giscus.app/client.js"),e.setAttribute("data-repo","MachineMakesNoise/machinemakesnoise.github.io"),e.setAttribute("data-repo-id","R_kgDOIu8A0Q"),e.setAttribute("data-category","Announcements"),e.setAttribute("data-category-id","DIC_kwDOIu8A0c4CTdhJ"),e.setAttribute("data-mapping","og:title"),e.setAttribute("data-strict","1"),e.setAttribute("data-reactions-enabled","1"),e.setAttribute("data-emit-metadata","0"),e.setAttribute("data-input-position","bottom"),e.setAttribute("data-theme","light_high_contrast"),e.setAttribute("data-lang","en"),e.setAttribute("data-loading","lazy"),e.setAttribute("crossorigin","anonymous"),e.onload=function(){window.scrollTo(0,document.getElementById("comments").offsetTop)},commentsButton.appendChild(e)})</script></div><div class=button><a class="ascii enabled" target=_blank href=https://github.com/sponsors/MachineMakesNoise>Sponsor</a></div><div class="button margin-left-font"><a class="ascii enabled" target=_blank href=https://machinemakesnoise.medium.com/how-to-start-making-gdextensions-for-godot-30cd052d873c>Medium</a></div><div class="button margin-left-font"><a class="ascii enabled" target=_blank href=https://github.com/MachineMakesNoise/HowToStartMakingGDExtensionsForGodot>Repository</a></div></div><div id=comments class=giscus></div><span class="ascii font-size-60pct margin-top-font">Copyright 2023 Machine Makes Noise<br><span class=contact data-user=tcatnoc data-domain=moc.esionsekamenihcam></span></p></footer></body></html>